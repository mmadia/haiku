/*
 * Copyright 2007-2012, Haiku, Inc. All Rights Reserved.
 * Distributed under the terms of the MIT License.
 */
#ifndef _BE_BUILD_H
#define _BE_BUILD_H


#include <config_target/target_types.h>


#define _HAIKU_BUILD_B_BEOS_VERSION_4				0x0400
#define _HAIKU_BUILD_B_BEOS_VERSION_4_5				0x0450
#define _HAIKU_BUILD_B_BEOS_VERSION_5				0x0500

#define _HAIKU_BUILD_B_BEOS_VERSION					_HAIKU_BUILD_B_BEOS_VERSION_5
#define _HAIKU_BUILD_B_BEOS_VERSION_MAUI			_HAIKU_BUILD_B_BEOS_VERSION_5

/* Haiku (API) version */
#define _HAIKU_BUILD_B_HAIKU_VERSION_BEOS			0x00000001
#define _HAIKU_BUILD_B_HAIKU_VERSION_BONE			0x00000002
#define _HAIKU_BUILD_B_HAIKU_VERSION_DANO			0x00000003
#define _HAIKU_BUILD_B_HAIKU_VERSION_1_ALPHA_1		0x00000100
#define _HAIKU_BUILD_B_HAIKU_VERSION_1_PRE_ALPHA_2	0x00000101
#define _HAIKU_BUILD_B_HAIKU_VERSION_1				0x00010000

#define _HAIKU_BUILD_B_HAIKU_VERSION				_HAIKU_BUILD_B_HAIKU_VERSION_1_PRE_ALPHA_2

/* Haiku ABI */
#define _HAIKU_BUILD_B_HAIKU_ABI_MAJOR				0xffff0000
#define _HAIKU_BUILD_B_HAIKU_ABI_GCC_2				0x00020000
#define _HAIKU_BUILD_B_HAIKU_ABI_GCC_4				0x00040000

#define _HAIKU_BUILD_B_HAIKU_ABI_GCC_2_ANCIENT		0x00020000
#define _HAIKU_BUILD_B_HAIKU_ABI_GCC_2_BEOS			0x00020001
#define _HAIKU_BUILD_B_HAIKU_ABI_GCC_2_HAIKU		0x00020002

#if __GNUC__ == 2
#	define _HAIKU_BUILD_B_HAIKU_ABI					_HAIKU_BUILD_B_HAIKU_ABI_GCC_2_HAIKU
#elif __GNUC__ == 3 || __GNUC__ == 4
#	define _HAIKU_BUILD_B_HAIKU_ABI					_HAIKU_BUILD_B_HAIKU_ABI_GCC_4
#else
#	error Unsupported gcc version!
#endif


#define _HAIKU_BUILD_B_HAIKU_BITS					__HAIKU_BUILD_HAIKU_ARCH_BITS
#define _HAIKU_BUILD_B_HAIKU_PHYSICAL_BITS			__HAIKU_BUILD_HAIKU_ARCH_PHYSICAL_BITS

#ifdef __HAIKU_BUILD_HAIKU_ARCH_64_BIT
#	define _HAIKU_BUILD_B_HAIKU_64_BIT				1
#else
#	define _HAIKU_BUILD_B_HAIKU_32_BIT				1
#endif

#ifdef __HAIKU_BUILD_HAIKU_ARCH_PHYSICAL_64_BIT
#	define _HAIKU_BUILD_B_HAIKU_PHYSICAL_64_BIT		1
#else
#	define _HAIKU_BUILD_B_HAIKU_PHYSICAL_32_BIT		1
#endif

#ifdef __HAIKU_BUILD_HAIKU_BEOS_COMPATIBLE
#	define _HAIKU_BUILD_B_HAIKU_BEOS_COMPATIBLE		1
#endif


#define __HAIKU_BUILD_HAIKU_BUILD_UNUSED(argument) argument
#define __HAIKU_BUILD_HAIKU_BUILD_PACKED __attribute__((packed))
#define __HAIKU_BUILD_HAIKU_BUILD_PRINTFLIKE(_format_, _args_) \
	__attribute__((format(__printf__, _format_, _args_)))
#define __HAIKU_BUILD_HAIKU_BUILD_EXPORT
#define __HAIKU_BUILD_HAIKU_BUILD_IMPORT

#define _HAIKU_BUILD_B_DEFINE_SYMBOL_VERSION(function, versionedSymbol)	\
	__asm__(".symver " function "," versionedSymbol)


#define __HAIKU_BUILD_HAIKU_BUILD_IMPEXP_ROOT
#define __HAIKU_BUILD_HAIKU_BUILD_IMPEXP_BE

#ifndef _HAIKU_BUILD_LIBROOT_FUNCTION_WRAPPER
#	define B_BEOS_VERSION_4					_HAIKU_BUILD_B_BEOS_VERSION_4
#	define B_BEOS_VERSION_4_5				_HAIKU_BUILD_B_BEOS_VERSION_4_5
#	define B_BEOS_VERSION_5					_HAIKU_BUILD_B_BEOS_VERSION_5

#	define B_BEOS_VERSION					_HAIKU_BUILD_B_BEOS_VERSION
#	define B_BEOS_VERSION_MAUI				_HAIKU_BUILD_B_BEOS_VERSION_MAUI

/* Haiku (API) version */
#	define B_HAIKU_VERSION_BEOS				_HAIKU_BUILD_B_HAIKU_VERSION_BEOS
#	define B_HAIKU_VERSION_BONE				_HAIKU_BUILD_B_HAIKU_VERSION_BONE
#	define B_HAIKU_VERSION_DANO				_HAIKU_BUILD_B_HAIKU_VERSION_DANO
#	define B_HAIKU_VERSION_1_ALPHA_1		_HAIKU_BUILD_B_HAIKU_VERSION_1_ALPHA_1
#	define B_HAIKU_VERSION_1_PRE_ALPHA_2	_HAIKU_BUILD_B_HAIKU_VERSION_1_PRE_ALPHA_2
#	define B_HAIKU_VERSION_1				_HAIKU_BUILD_B_HAIKU_VERSION_1

#	define B_HAIKU_VERSION					_HAIKU_BUILD_B_HAIKU_VERSION

/* Haiku ABI */
#	define B_HAIKU_ABI_MAJOR				_HAIKU_BUILD_B_HAIKU_ABI_MAJOR
#	define B_HAIKU_ABI_GCC_2				_HAIKU_BUILD_B_HAIKU_ABI_GCC_2
#	define B_HAIKU_ABI_GCC_4				_HAIKU_BUILD_B_HAIKU_ABI_GCC_4

#	define B_HAIKU_ABI_GCC_2_ANCIENT		_HAIKU_BUILD_B_HAIKU_ABI_GCC_2_ANCIENT
#	define B_HAIKU_ABI_GCC_2_BEOS			_HAIKU_BUILD_B_HAIKU_ABI_GCC_2_BEOS
#	define B_HAIKU_ABI_GCC_2_HAIKU			_HAIKU_BUILD_B_HAIKU_ABI_GCC_2_HAIKU

#	if __GNUC__ == 2 || __GNUC__ == 3 || __GNUC__ == 4
#		define B_HAIKU_ABI					_HAIKU_BUILD_B_HAIKU_ABI
#	else
#		error Unsupported gcc version!
#	endif


#	define B_HAIKU_BITS						_HAIKU_BUILD_B_HAIKU_BITS
#	define B_HAIKU_PHYSICAL_BITS			_HAIKU_BUILD_B_HAIKU_PHYSICAL_BITS

#	ifdef __HAIKU_ARCH_64_BIT
#		define B_HAIKU_64_BIT				_HAIKU_BUILD_B_HAIKU_64_BIT
#	else
#		define B_HAIKU_32_BIT				_HAIKU_BUILD_B_HAIKU_32_BIT
#	endif

#	ifdef __HAIKU_ARCH_PHYSICAL_64_BIT
#		define B_HAIKU_PHYSICAL_64_BIT		_HAIKU_BUILD_B_HAIKU_PHYSICAL_64_BIT
#	else
#		define B_HAIKU_PHYSICAL_32_BIT		_HAIKU_BUILD_B_HAIKU_PHYSICAL_32_BIT
#	endif

#	ifdef __HAIKU_BEOS_COMPATIBLE
#		define B_HAIKU_BEOS_COMPATIBLE		_HAIKU_BUILD_B_HAIKU_BEOS_COMPATIBLE
#	endif


#	define _UNUSED(argument) __HAIKU_BUILD_HAIKU_BUILD_UNUSED(argument)
#	define _PACKED __HAIKU_BUILD_HAIKU_BUILD_PACKED
#	define _PRINTFLIKE(_format_, _args_) \
		__HAIKU_BUILD_HAIKU_BUILD_PRINTFLIKE(_format_, _args_)
#	define _EXPORT
#	define _IMPORT

#	define B_DEFINE_SYMBOL_VERSION(function, versionedSymbol)	\
		_HAIKU_BUILD_B_DEFINE_SYMBOL_VERSION(function, versionedSymbol)


#	define _IMPEXP_ROOT
#	define _IMPEXP_BE
#endif /* _HAIKU_BUILD_LIBROOT_FUNCTION_WRAPPER */


#endif	/* _BE_BUILD_H */
